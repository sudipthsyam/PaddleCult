<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.2/main.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.2/main.min.js"></script>
</head>
<body>
    <div id="calendar"></div>

    <div id="event-form" style="display:none;">
        <h2>Add Event</h2>
        <form id="addEventForm">
            <label for="eventTitle">Event Title:</label>
            <input type="text" id="eventTitle" name="eventTitle" required>
            <label for="eventStart">Event Start:</label>
            <input type="datetime-local" id="eventStart" name="eventStart" required>
            <label for="eventEnd">Event End:</label>
            <input type="datetime-local" id="eventEnd" name="eventEnd" required>
            <button type="button" onclick="addEvent()">Add Event</button>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const calendarEl = document.getElementById('calendar');
            const eventFormEl = document.getElementById('event-form');

            const calendar = new FullCalendar.Calendar(calendarEl, {
                plugins: ['dayGrid'],
                selectable: true,
                events: [],
                select: function(info) {
                    eventFormEl.style.display = 'block';
                    document.getElementById('eventStart').value = moment(info.start).format('YYYY-MM-DDTHH:mm');
                    document.getElementById('eventEnd').value = moment(info.end).format('YYYY-MM-DDTHH:mm');
                }
            });

            calendar.render();

            window.addEvent = function() {
                const title = document.getElementById('eventTitle').value;
                const start = document.getElementById('eventStart').value;
                const end = document.getElementById('eventEnd').value;

                if (title && start && end) {
                    calendar.addEvent({
                        title: title,
                        start: start,
                        end: end
                    });

                    eventFormEl.style.display = 'none';
                } else {
                    alert('Please fill in all fields.');
                }
            };
        });
    </script>
</body>
</html>
